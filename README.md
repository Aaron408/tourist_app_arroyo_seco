# üåÆ Tourist App Arroyo Seco

Aplicaci√≥n tur√≠stica y gastron√≥mica para promover la riqueza cultural de Arroyo Seco, Quer√©taro.

[![CI/CD](https://github.com/Aaron408/tourist_app_arroyo_seco/workflows/K6%20Load%20Testing%20Pipeline/badge.svg)](https://github.com/Aaron408/tourist_app_arroyo_seco/actions)
[![Tests](https://img.shields.io/badge/tests-passing-brightgreen)]()
[![Coverage](https://img.shields.io/badge/coverage-70%25-yellow)]()

---

## üìã Tabla de Contenidos

- [Descripci√≥n](#descripci√≥n)
- [Arquitectura](#arquitectura)
- [Tecnolog√≠as](#tecnolog√≠as)
- [Estructura del Proyecto](#estructura-del-proyecto)
- [Instalaci√≥n](#instalaci√≥n)
- [Testing](#testing)
- [CI/CD y Monitoreo](#cicd-y-monitoreo)
- [Deployment](#deployment)
- [Documentaci√≥n](#documentaci√≥n)

---

## üìñ Descripci√≥n

Sistema multiplataforma que incluye:

- üåê **PWA** - Aplicaci√≥n web progresiva
  - Sitio p√∫blico con informaci√≥n tur√≠stica y gastron√≥mica
  - Panel de administraci√≥n para gesti√≥n de contenido
  
- üì± **Mobile** - Aplicaci√≥n m√≥vil nativa (React Native/Expo)
  - Explorar recetas, ingredientes y ubicaciones
  - Informaci√≥n offline
  - Navegaci√≥n por tabs

---

## üèóÔ∏è Arquitectura

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Frontend                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ   PWA (React+Vite)   ‚îÇ   Mobile (React Native/Expo)        ‚îÇ
‚îÇ   - Landing Pages    ‚îÇ   - Tab Navigation                   ‚îÇ
‚îÇ   - Admin Panel      ‚îÇ   - Offline Support                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Backend (API)                            ‚îÇ
‚îÇ                   (Por implementar)                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Testing & Monitoring Stack                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ   Jest     ‚îÇ Playwright ‚îÇ     K6      ‚îÇ  Prometheus+Grafana‚îÇ
‚îÇ  Unit Tests‚îÇ  E2E Tests ‚îÇ Load Tests  ‚îÇ    Monitoring      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üõ†Ô∏è Tecnolog√≠as

### Frontend

- **PWA:** React 18, Vite, React Router, TailwindCSS
- **Mobile:** React Native, Expo, TypeScript
- **State Management:** Zustand
- **Internationalization:** Custom i18n (es-MX, en-US)

### Testing

- **Unit/Integration:** Jest, ts-jest
- **E2E:** Playwright
- **Load Testing:** K6
- **Coverage:** Istanbul

### DevOps & Monitoring

- **CI/CD:** GitHub Actions
- **Metrics:** Prometheus
- **Visualization:** Grafana
- **Web Server:** Nginx

---

## üìÅ Estructura del Proyecto

```
tourist_app_arroyo_seco/
‚îú‚îÄ‚îÄ pwa/                        # Aplicaci√≥n web progresiva
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ landing/           # Sitio p√∫blico
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/         # P√°ginas (Home, Gastronomy, Locations, Events)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/    # Componentes reutilizables
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ i18n/          # Traducciones
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ stores/        # State management
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin/             # Panel de administraci√≥n
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ pages/         # Dashboard, Catalogs, Users, etc.
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ contexts/      # Auth context
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ i18n/          # Traducciones admin
‚îÇ   ‚îú‚îÄ‚îÄ public/                # Assets est√°ticos
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ mobile/                     # Aplicaci√≥n m√≥vil
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (tabs)/            # Navegaci√≥n por tabs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.tsx      # Home
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ explore.tsx    # Explorar
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recipes.tsx    # Recetas
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ restaurants.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ screens/           # Pantallas adicionales
‚îÇ   ‚îú‚îÄ‚îÄ components/            # Componentes UI
‚îÇ   ‚îú‚îÄ‚îÄ contexts/              # Language provider
‚îÇ   ‚îî‚îÄ‚îÄ i18n/                  # Traducciones
‚îÇ
‚îú‚îÄ‚îÄ tests/                      # Suite completa de pruebas
‚îÇ   ‚îú‚îÄ‚îÄ unit/                  # Tests unitarios
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pwa/              # Tests de PWA
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.spec.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ language.spec.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routing.spec.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mobile/           # Tests de Mobile
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ navigation.spec.ts
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ components.spec.ts
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ screens.spec.ts
‚îÇ   ‚îú‚îÄ‚îÄ integration/           # Tests de integraci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ e2e/                   # Tests end-to-end
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ landing.spec.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin.spec.ts
‚îÇ   ‚îî‚îÄ‚îÄ performance/           # Tests de rendimiento
‚îÇ
‚îú‚îÄ‚îÄ monitoring/                 # Stack de monitoreo
‚îÇ   ‚îú‚îÄ‚îÄ k6/                    # Scripts de pruebas de carga
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ load-test-landing.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ load-test-admin.js
‚îÇ   ‚îú‚îÄ‚îÄ prometheus/            # Configuraci√≥n de Prometheus
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ k6-prometheus-config.yml
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ k6_alerts.yml
‚îÇ   ‚îî‚îÄ‚îÄ grafana/               # Dashboards de Grafana
‚îÇ       ‚îî‚îÄ‚îÄ k6-dashboard.json
‚îÇ
‚îú‚îÄ‚îÄ docs/                       # Documentaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ setup/                 # Gu√≠as de configuraci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SERVER_SETUP.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GITHUB_GRAFANA_INTEGRATION.md
‚îÇ   ‚îú‚îÄ‚îÄ testing/               # Documentaci√≥n de testing
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îÇ   ‚îî‚îÄ‚îÄ api/                   # Documentaci√≥n de API
‚îÇ
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ k6-load-testing.yml  # CI/CD Pipeline
‚îÇ
‚îî‚îÄ‚îÄ README.md                   # Este archivo
```

---

## üöÄ Instalaci√≥n

### Prerrequisitos

- Node.js >= 18.0.0
- npm >= 9.0.0
- Git

### PWA

```bash
# Clonar repositorio
git clone https://github.com/Aaron408/tourist_app_arroyo_seco.git
cd tourist_app_arroyo_seco/pwa

# Instalar dependencias
npm install

# Desarrollo
npm run dev

# Build de producci√≥n
npm run build

# Preview de producci√≥n
npm run preview
```

**URLs:**
- Desarrollo: http://localhost:5173
- Landing: http://localhost:5173/
- Admin: http://localhost:5173/administracion/login

**Credenciales de prueba:**
- Email: `admin@arroyoseco.com`
- Password: `admin123`

### Mobile

```bash
cd mobile

# Instalar dependencias
npm install

# Iniciar Expo
npx expo start

# iOS
npx expo start --ios

# Android
npx expo start --android

# Web
npx expo start --web
```

---

## üß™ Testing

### Setup

```bash
cd tests
npm install

# Instalar navegadores de Playwright
npm run playwright:install
```

### Ejecutar Tests

```bash
# Tests unitarios
npm run test:unit

# Tests con cobertura
npm run test:coverage

# Tests E2E
npm run test:e2e

# Tests E2E con UI interactiva
npm run test:e2e:ui

# Todos los tests
npm run test:all
```

### Pruebas de Carga (K6)

```bash
# Instalar K6 (Linux)
sudo apt-get install k6

# Test de Landing
cd tests
npm run test:load

# Test de Admin
npm run test:load:admin

# Desde la ra√≠z
k6 run monitoring/k6/load-test-landing.js
k6 run monitoring/k6/load-test-admin.js
```

### Cobertura

Los reportes de cobertura se generan en `tests/coverage/`

**Objetivos:**
- Branches: 70%
- Functions: 70%
- Lines: 70%
- Statements: 70%

---

## üîÑ CI/CD y Monitoreo

### GitHub Actions

**Workflow:** `.github/workflows/k6-load-testing.yml`

**Triggers:**
- ‚úÖ Push a main (archivos PWA o K6)
- ‚úÖ Pull Requests
- ‚úÖ Manual (workflow_dispatch)
- ‚úÖ Schedule (diario 2 AM)

**Jobs:**
1. Setup y validaci√≥n
2. Pruebas de carga - Landing
3. Pruebas de carga - Admin
4. Reporte consolidado
5. Cleanup

**Ver resultados:**
- GitHub Actions: https://github.com/Aaron408/tourist_app_arroyo_seco/actions

### Prometheus

**URL:** http://74.208.45.131:9090

**M√©tricas monitoreadas:**
- HTTP requests de K6
- Latencia (P95, P99)
- Error rate
- Virtual users
- Throughput

**Queries √∫tiles:**
```promql
# Total requests
sum(k6_http_reqs_total)

# Request rate
rate(k6_http_reqs_total[1m])

# P95 latency
histogram_quantile(0.95, rate(k6_http_req_duration_bucket[5m]))
```

### Grafana

**URL:** http://vps-master.duckdns.org:3000/grafana

**Dashboard:** "K6 Load Testing - Arroyo Seco Tourism App"

**Paneles:**
- Resumen de pruebas
- HTTP Request Duration (P95, P99)
- Request Rate & Error Rate
- Virtual Users
- HTTP Status Codes
- Check Success Rate
- Duration por p√°gina
- Data Transfer

---

## üåê Deployment

### Servidor de Producci√≥n

**URL:** http://vps-master.duckdns.org:3000  
**IP:** 74.208.45.131  
**Ubicaci√≥n:** `/home/github/tourist_app_arroyo_seco`

### Deploy de PWA

```bash
# Conectar al servidor
ssh root@74.208.45.131

# Actualizar c√≥digo
cd /home/github/tourist_app_arroyo_seco
git pull origin main

# Build
cd pwa
npm install
npm run build

# Recargar Nginx
sudo systemctl reload nginx
```

### Configuraci√≥n de Nginx

```nginx
server {
    listen 3000;
    server_name vps-master.duckdns.org;
    root /home/github/tourist_app_arroyo_seco/pwa/dist;
    
    location / {
        try_files $uri $uri/ /index.html;
    }
}
```

---

## üìö Documentaci√≥n

### Gu√≠as Disponibles

- **[Testing Documentation](docs/testing/README.md)**
  - Suite completa de pruebas
  - Gu√≠as de Jest, Playwright y K6
  - Configuraci√≥n de CI/CD
  - M√©tricas y monitoreo

- **[Server Setup](docs/setup/SERVER_SETUP.md)**
  - Configuraci√≥n del servidor
  - Deployment de PWA
  - Configuraci√≥n de Prometheus
  - Configuraci√≥n de Grafana

- **[GitHub + Grafana Integration](docs/setup/GITHUB_GRAFANA_INTEGRATION.md)**
  - Pipeline completo K6 + GitHub Actions
  - Integraci√≥n con Prometheus/Grafana
  - Gu√≠a de captura de evidencias
  - Estructura del entregable

---

## üéØ Roadmap

### Completado ‚úÖ

- [x] PWA con Landing y Admin
- [x] Mobile app con Expo
- [x] Internacionalizaci√≥n (es-MX, en-US)
- [x] Tests unitarios completos
- [x] Tests E2E con Playwright
- [x] Tests de carga con K6
- [x] CI/CD con GitHub Actions
- [x] Monitoreo con Prometheus
- [x] Dashboards en Grafana
- [x] Deployment en servidor

### En Progreso üöß

- [ ] Backend API (en desarrollo)
- [ ] Autenticaci√≥n real
- [ ] Base de datos

### Futuro üîÆ

- [ ] Push notifications (PWA)
- [ ] Modo offline completo (Mobile)
- [ ] Integraci√≥n con mapas
- [ ] Sistema de reviews
- [ ] Reservaciones

---

## üë• Equipo

- **Desarrollo:** Equipo Tourist App Arroyo Seco
- **QA & Testing:** Sistema automatizado con K6, Jest, Playwright
- **DevOps:** GitHub Actions + Prometheus + Grafana

---

## üìÑ Licencia

Este proyecto es privado y de uso acad√©mico.

---

## üÜò Soporte

### Problemas Comunes

**Error en tests unitarios:**
```bash
cd tests
npm install
npm run test:unit
```

**Playwright no encuentra navegadores:**
```bash
npm run playwright:install
```

**K6 no instalado:**
```bash
# Linux
sudo apt-get install k6

# Windows
choco install k6

# macOS
brew install k6
```

### Contacto

- **GitHub Issues:** https://github.com/Aaron408/tourist_app_arroyo_seco/issues
- **Email:** (contacto del equipo)

---

## üìä Badges de Status

![Build](https://img.shields.io/badge/build-passing-brightgreen)
![Tests](https://img.shields.io/badge/tests-passing-brightgreen)
![Coverage](https://img.shields.io/badge/coverage-70%25-yellow)
![K6](https://img.shields.io/badge/K6-load%20testing-blue)
![Prometheus](https://img.shields.io/badge/monitoring-prometheus-orange)
![Grafana](https://img.shields.io/badge/visualization-grafana-yellow)

---

**üåÆ Descubre los Sabores de Arroyo Seco üåÆ**
